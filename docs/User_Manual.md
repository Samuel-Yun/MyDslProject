# 用户手册

## 1. 简介
本手册为客服机器人DSL语言的用户提供使用指导。通过编写DSL脚本，您可以定义机器人如何响应不同的用户请求，帮助客服工作实现自动化。

## 2. 安装与运行

### 2.1 安装依赖
首先，确保您的系统已安装 Python 3。然后，使用以下命令安装项目所需的依赖：
```bash
pip install -r requirements.txt
```

### 2.2 运行环境
该程序使用命令行界面（CLI）执行脚本。运行脚本的基本命令为：
```bash
python main.py
```
弹出一个对话框，选择你的DSL脚本文件的路径进行加载即可解析相应的dsl脚本。

### 2.3 运行输入
加载脚本后，在聊天框输入对应内容即可与机器人对话。

以下是完整的 `User_Manual.md` 填充版本：

## 3. DSL概述

DSL（领域特定语言）用于定义聊天机器人的对话逻辑。通过该语言，用户可以创建灵活的自动对话脚本，实现与用户的动态交互。

### 主要功能：
- **模式管理**：支持基于状态的模式切换。
- **条件判断**：使用 `if`、`elif` 和 `else` 实现多样化的逻辑处理。
- **动态响应**：根据用户输入生成定制化的响应。
- **变量管理**：通过 `set` 语句对内部状态或变量进行操作。

---

## 4. 如何编写脚本

### 基本结构

DSL脚本由多个模式组成，定义了对话的不同阶段。每个脚本需要以 `start` 开头，并以 `end` 结束。脚本的逻辑可以通过条件判断（如 `if`）和模式切换（如 `go`）来实现。

以下是一个简单的脚本结构示例：

```plaintext
start INIT
    if "你好" in user_input then
        response "您好，很高兴为您服务，请问您的需要是"
    elif "账户" in user_input then
        response "已转移至账户模式"
        go ACCOUNT
    else
        response "抱歉，我没有理解您的问题"

ACCOUNT
    if "余额" in user_input then
        response "您的余额为 "
    elif "充值" in user_input then
        response "请输入您所充值的金额"
        set balance = balance + user_input
    elif "退出" in user_input then
        response "您已退出账户模式"
        go INIT
    else
        response "抱歉，我没有理解您的问题"
end
```

## 4. DSL语法

### 4.1 语法元素

#### 模式定义
- **start**: 定义初始模式。
- **end**: 脚本结束标志。
- **模式名**: 大写单词，标识对话的不同阶段。

#### 条件判断
- **if**: 条件满足时执行。
- **elif**: 其他条件分支。
- **else**: 所有条件不满足时执行。

#### 操作语句
- **response**: 输出响应。
- **go**: 切换到指定模式。
- **set**: 对变量赋值或操作。

### 4.2 示例解释

#### 示例1：基础对话逻辑

```plaintext
start INIT
    if "你好" in user_input then
        response "您好！请问有什么可以帮助您？"
    else
        response "抱歉，我没有理解您的问题"
end
```

- 当用户输入 "你好" 时，输出 "您好！请问有什么可以帮助您？"。
- 当输入其他内容时，输出 "抱歉，我没有理解您的问题"。

#### 示例2：模式切换与变量管理

```plaintext
start INIT
    if "余额" in user_input then
        response "您的余额为 "
    elif "充值" in user_input then
        response "请输入金额"
        set balance = balance + user_input
    elif "退出" in user_input then
        response "已退出"
        go INIT
end
```

- 用户输入 "充值" 后，提示输入金额并更新余额。
- 输入 "退出" 后，切换回 INIT 模式。

## 5. 常见问题与解决方案

### 问题1：无法识别用户输入？
**解决方法**：使用 `else` 语句捕获未定义的输入，并输出提示信息。

```plaintext
else
    response "抱歉，我没有理解您的问题，请重试。"
```

### 问题2：如何初始化变量？
**解决方法**：通过解释器启动时传递初始化值。例如，初始化余额为 `balance = 0`。

### 问题3：如何切换模式？
**解决方法**：使用 `go` 语句跳转至目标模式。

## 6. 扩展DSL功能

### 添加运算符
支持更多操作符（如 `<`, `>`, `==`）以增强逻辑判断的能力。

### 引入外部API调用
通过扩展解释器，实现脚本直接调用外部服务（如天气、快递查询API）。

### 增加复杂逻辑
支持更复杂的条件嵌套或函数调用。

## 8. 结语
通过本用户手册，您可以轻松学习如何编写DSL脚本来定义聊天机器人的对话逻辑。结合条件判断、模式切换和变量管理等功能，您能够创建一个灵活、高效的自动化对话系统。

